1) Download anaconda from https://repo.anaconda.com/archive/Anaconda3-2021.05-Linux-x86_64.sh
bash Anaconda3-2021.05-Linux-x86_64.sh -b -p ~/anaconda


2) Download Cuda toolkit from
https://developer.nvidia.com/cuda-downloads?target_os=Linux&target_arch=x86_64&Distribution=Ubuntu&target_version=18.04&target_type=deb_local

Follow given steps for ubuntu on that link:

Download:
wget https://developer.download.nvidia.com/compute/cuda/11.4.1/local_installers/cuda-repo-ubuntu1804-11-4-local_11.4.1-470.57.02-1_amd64.deb

wget https://developer.download.nvidia.com/compute/cuda/repos/ubuntu1804/x86_64/cuda-ubuntu1804.pin
sudo mv cuda-ubuntu1804.pin /etc/apt/preferences.d/cuda-repository-pin-600
wget https://developer.download.nvidia.com/compute/cuda/11.4.1/local_installers/cuda-repo-ubuntu1804-11-4-local_11.4.1-470.57.02-1_amd64.deb
sudo dpkg -i cuda-repo-ubuntu1804-11-4-local_11.4.1-470.57.02-1_amd64.deb
sudo apt-key add /var/cuda-repo-ubuntu1804-11-4-local/7fa2af80.pub
sudo apt-get update
sudo apt-get -y install cuda
===========
Additional steps:
sudo apt-get install nvidia-gds   

3) Need to install gcc 6.0 for Cuda 11
sudo apt install gcc (Ubuntu 18.04 => Default version is gcc 7.5)
gcc -v => to check version

2.1. Verify You Have a CUDA-Capable GPU
lspci | grep -i nvidia
2.2. Verify You Have a Supported Version of Linux
$ uname -m && cat /etc/*release

2.3 kernel
$ uname -r
5.4.0-80-generic
3.8. Ubuntu


======================================
Summary of installation steps given: https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#ubuntu-installation
    Perform the pre-installation actions.
    https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#pre-installation-actions
    
    Install repository meta-data

    $ sudo dpkg -i cuda-repo-<distro>_<version>_<architecture>.deb
    

    Install the CUDA public GPG key

    When installing using the local repo:

    $ sudo apt-key add /var/cuda-repo-<distro>-<version>/7fa2af80.pub

    When installing using network repo on Ubuntu 20.04/18.04:

    $ sudo apt-key adv --fetch-keys https://developer.download.nvidia.com/compute/cuda/repos/<distro>/<architecture>/7fa2af80.pub

    When installing using network repo on Ubuntu 16.04:

    $ sudo apt-key adv --fetch-keys http://developer.download.nvidia.com/compute/cuda/repos/<distro>/<architecture>/7fa2af80.pub

    Pin file to prioritize CUDA repository:

    $ wget https://developer.download.nvidia.com/compute/cuda/repos/<distro>/<architecture>/cuda-<distro>.pin
    $ sudo mv cuda-<distro>.pin /etc/apt/preferences.d/cuda-repository-pin-600

    Update the Apt repository cache

    $ sudo apt-get update

    Install CUDA
    Note: These two commands must be executed separately.

    $ sudo apt-get install cuda

    To include all GDS packages:

    $ sudo apt-get install nvidia-gds 

    Perform the post-installation actions.
    https://docs.nvidia.com/cuda/cuda-installation-guide-linux/index.html#post-installation-actions
======================================
Post installation steps:
export PATH=/usr/local/cuda-11.4/bin${PATH:+:${PATH}}

The NVIDIA Persistence Daemon should be automatically started for POWER9 installations. Check that it is running with the following command:

$ systemctl status nvidia-persistenced

If it is not active, run the following command:

$ sudo systemctl enable nvidia-persistenced


$ sudo cp /lib/udev/rules.d/40-vm-hotadd.rules /etc/udev/rules.d
$ sudo sed -i '/SUBSYSTEM=="memory", ACTION=="add"/d' /etc/udev/rules.d/40-vm-hotadd.rules


    

